<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../assets/Logos/Logo-Icon.ico" type="image/x-icon">
  <title>Espace Personnel - Arômes de Paris</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <aside class="sidebar" id="sidebar">
    <div class="logo"><img src="Logo.png" alt="Logo"></div>
    <nav class="menu">
      <a href="dashboard.html" class="menu-item">
        <i data-lucide="layout-dashboard"></i> Tableau de bord
      </a>
      <div class="menu-item" onclick="toggleSubmenu('employees')">
        <i data-lucide="users"></i> Employés
      </div>
      <div class="submenu" id="submenu-employees">
        <a href="employes-liste.html">Liste des employés</a>
        <a href="employes-ajouter.html">Ajouter un employé</a>
      </div>
      <a href="reservations.html" class="menu-item">
        <i data-lucide="calendar-days"></i> Réservations
      </a>
      <a href="espace-personnel.html" class="menu-item active">
        <i data-lucide="user"></i> Espace Personnel
      </a>
    </nav>
    <button class="btn-logout" onclick="logout()">
      <i data-lucide="log-out"></i> Déconnexion
    </button>
  </aside>

  <button class="mobile-menu-btn" onclick="toggleSidebar()"><i data-lucide="menu"></i></button>

  <main class="main">
    <header class="header">
      <div>
        <div class="breadcrumb">
          <a href="dashboard.html">Tableau de bord</a> ›
          <span>Espace Personnel</span>
        </div>
        <h1>Mon Espace Personnel</h1>
      </div>
      <div class="header-right">
        <div class="theme-toggle" onclick="toggleTheme()">
          <i data-lucide="sun"></i>
          <div class="toggle-switch"></div>
          <i data-lucide="moon"></i>
        </div>
        <div class="user">
          <div class="avatar">JD</div>
          <div>
            <div class="user-name">Jean Dupont</div>
            <div class="user-role">Administrateur</div>
          </div>
        </div>
      </div>
    </header>

    <!-- Profile Header -->
    <div class="card">
      <div class="profile-header">
        <div class="profile-avatar">JD</div>
        <div class="profile-info">
          <h2>Jean Dupont</h2>
          <div class="role">Administrateur</div>
          <div class="profile-stats">
            <div class="profile-stat">
              <div class="value">3</div>
              <div class="label">Années</div>
            </div>
            <div class="profile-stat">
              <div class="value">15</div>
              <div class="label">Jours congés</div>
            </div>
            <div class="profile-stat">
              <div class="value">98%</div>
              <div class="label">Présence</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs Navigation -->
    <div class="card">
      <div class="tabs">
        <button class="tab active" onclick="switchTab('informations')">Informations</button>
        <button class="tab" onclick="switchTab('emploi')">Emploi</button>
        <button class="tab" onclick="switchTab('securite')">Sécurité</button>
        <button class="tab" onclick="switchTab('conges')">Congés</button>
      </div>

      <!-- Informations Tab -->
      <div id="tab-informations" class="tab-content active">
        <form onsubmit="updatePersonalInfo(event)">
          <div class="form-row">
            <div class="form-group">
              <label>Prénom</label>
              <input type="text" class="form-input" value="Jean" required>
            </div>
            <div class="form-group">
              <label>Nom</label>
              <input type="text" class="form-input" value="Dupont" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Email</label>
              <input type="email" class="form-input" value="j.dupont@aromesdeparis.fr" required>
            </div>
            <div class="form-group">
              <label>Téléphone</label>
              <input type="tel" class="form-input" value="+33 1 45 67 89 00">
            </div>
          </div>
          <div class="form-group">
            <label>Adresse</label>
            <textarea class="form-input" rows="3">123 Avenue des Champs-Élysées, 75008 Paris</textarea>
          </div>
          <div class="modal-footer" style="margin-top: 30px; padding: 0;">
            <button type="submit" class="btn btn-primary"><i data-lucide="save"></i> Enregistrer</button>
          </div>
        </form>
      </div>

      <!-- Emploi Tab (Read Only) -->
      <div id="tab-emploi" class="tab-content">
        <!-- Content remains same, just structure -->
        <div class="form-row">
            <div class="form-group"><label>Poste</label><input type="text" class="form-input" value="Administrateur" readonly></div>
            <div class="form-group"><label>Département</label><input type="text" class="form-input" value="Direction" readonly></div>
        </div>
        <!-- ... -->
      </div>

      <!-- Sécurité Tab -->
      <div id="tab-securite" class="tab-content">
        <form onsubmit="updateSecurity(event)">
          <div class="form-group">
            <label>Motif de passe actuel</label>
            <input type="password" class="form-input" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Nouveau mot de passe</label>
              <input type="password" class="form-input" required minlength="8">
            </div>
            <div class="form-group">
              <label>Confirmer</label>
              <input type="password" class="form-input" required>
            </div>
          </div>
          <div class="alert alert-warning">
            <i data-lucide="alert-triangle" style="width:16px; display:inline-block"></i> Après le changement de mot de passe, vous serez déconnecté.
          </div>
          <div class="modal-footer" style="margin-top: 30px; padding: 0;">
            <button type="submit" class="btn btn-primary">Changer le mot de passe</button>
          </div>
        </form>
      </div>

      <!-- Congés Tab -->
      <div id="tab-conges" class="tab-content">
        <div class="card-header" style="margin-bottom: 20px;">
          <h3>Solde de congés</h3>
        </div>
        <div class="stats" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 30px;">
          <div class="stat-card">
            <div class="stat-icon"><i data-lucide="check-circle"></i></div>
            <div>
              <div class="stat-label">Acquis</div>
              <div class="stat-value">25</div>
            </div>
          </div>
          <div class="stat-card">
             <div class="stat-icon"><i data-lucide="minus-circle"></i></div>
            <div>
              <div class="stat-label">Pris</div>
              <div class="stat-value">10</div>
            </div>
          </div>
          <div class="stat-card">
             <div class="stat-icon"><i data-lucide="calendar"></i></div>
            <div>
              <div class="stat-label">Restant</div>
              <div class="stat-value">15</div>
            </div>
          </div>
        </div>

        <div class="card-header" style="margin-bottom: 20px;">
          <h3>Demandes récentes</h3>
          <button class="btn btn-primary" onclick="openModal('leaveRequestModal')">
            <i data-lucide="plus"></i> Nouvelle demande
          </button>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr><th>Période</th><th>Type</th><th>Statut</th><th>Jours</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>15-22 Déc 2024</td>
                <td>Congés payés</td>
                <td><span class="status confirmed"><i data-lucide="check"></i> Approuvé</span></td>
                <td>7</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <!-- Leave Modal -->
  <div class="modal-overlay" id="leaveRequestModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Nouvelle demande</h3>
        <button class="modal-close" onclick="closeModal('leaveRequestModal')"><i data-lucide="x"></i></button>
      </div>
      <form onsubmit="submitLeaveRequest(event)">
        <!-- Form fields... -->
        <div class="form-row">
            <div class="form-group"><label>Type</label><select class="form-input"><option>Congés payés</option></select></div>
            <div class="form-group"><label>Jours</label><input type="number" class="form-input"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeModal('leaveRequestModal')">Annuler</button>
          <button type="submit" class="btn btn-primary">Soumettre</button>
        </div>
      </form>
    </div>
  </div>

  <script src="main.js"></script>
  <script>
    // Tab switching logic
    function switchTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById('tab-' + tabName).classList.add('active');
      event.target.classList.add('active');
      lucide.createIcons(); // Refresh icons in new tab
    }
    // ... other logic functions ...
    function updatePersonalInfo(e) { e.preventDefault(); alert("Enregistré"); }
    function updateSecurity(e) { e.preventDefault(); alert("Mot de passe changé"); }
    function submitLeaveRequest(e) { e.preventDefault(); alert("Envoyé"); closeModal('leaveRequestModal'); }
  </script>
</body>
</html>